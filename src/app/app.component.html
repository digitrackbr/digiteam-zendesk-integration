<app-login *ngIf="appStatus === 'login'" (loginSuccess)="onLoginSuccess($event)">

</app-login>

<app-order-create *ngIf="appStatus === 'create'" (createdSuccess)="onCreatedSuccess($event)">

</app-order-create>

<ng-container *ngIf="appStatus === 'loading'">
  <div class="p-grid">
    <div class="p-col-12 image-center">
      <img src="assets/ajax-loader.gif" alt="loader">
    </div>
  </div>
</ng-container>

<ng-container *ngIf="appStatus === 'detail'">
  <div class="p-grid">
    <div class="p-col-12">
      <p-card>
        <table>
          <tr>
            <td>
              <div class="circle" [style.background-color]="'#' + statusColor"></div>
            </td>
            <td>
            </td>
            <td>
              <span>{{orderDetail.status}}</span>
            </td>
          </tr>
        </table>
        <div class="p-col-12">
          {{orderDetail.orderType?.name}}
        </div>
        <div class="p-col-12">
          Número do OS
        </div>
        <div class="p-col-12" *ngIf="orderDetail.statusId === 11">
          Data de conclusão: {{orderDetail.dueDate | date : 'medium'}}
        </div>
        <div class="p-col-12" *ngIf="orderDetail.statusId === 8">
          <agm-map [latitude]="orderDetail?.whereis?.latitude"
                   [longitude]="orderDetail?.whereis?.longitude"
                   style="height: 300px; width: 100%"
                   disableDefaultUI="true"
                   gestureHandling="none">
            <agm-direction [origin]="origin"
                           [destination]="destination"
                           (onResponse)="onResponse($event)"
                           style="color: black"
                           [markerOptions]="markerOptions"
                           [renderOptions]="renderOptions"
                           *ngIf="orderDetail.planningModel !== null">
            </agm-direction>
            <agm-overlay
              [latitude]="origin.lat"
              [longitude]="origin.lng">
              <div class="arrival_time" style="background-color: beige">
                <b>{{durationToPoint?.value | date:'HH:mm'}}</b>
              </div>
            </agm-overlay>
          </agm-map>
        </div>
        <table *ngIf="showAgentData()">
          <tr>
            <td>
              <div>
                <img alt=""
                     *ngIf="orderDetail.agentModel?.imageUrl === null"
                     style="border-radius: 50%; width: 50px"
                     src="https://secure.gravatar.com/avatar/5dbbdc1eae890ebabee2f477685ba5c2?d=https%3A//assets.zendesk.com/images/2016/default-avatar-80.png&amp;s=80&amp;r=g">
                <img alt=""
                     *ngIf="orderDetail.agentModel?.imageUrl !== null"
                     style="border-radius: 50%; width: 50px"
                     src="{{orderDetail.agentModel?.imageUrl}}">
              </div>
            </td>
            <td>
              <table>
                <tr>
                  <td><span>{{orderDetail.agentModel?.name}}</span></td>
                </tr>
                <tr>
                  <td>Atendimento: {{orderDetail.planningModel?.estimatedEndDate | date: "medium"}}</td>
                </tr>
              </table>
            </td>
          </tr>
        </table>
        <p-footer>
          <div class="p-col-12" style="text-align: end">
            <p-button label="Cancelar OS"
                      icon="pi pi-times"
                      iconPos="right"
                      class="ui-button-rounded ui-button-secondary"
                      (onClick)="onCancelOrder($event)"
                      *ngIf="orderDetail.statusId === 1">
            </p-button>
          </div>
        </p-footer>
      </p-card>
    </div>

  </div>
</ng-container>

